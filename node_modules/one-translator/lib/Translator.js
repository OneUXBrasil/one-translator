/*

Description: A simple and practical way to translate texts!
Made by: Snarloff (OneUX Founder)
Github: https://github.com/Snarloff
OneUX: https://github.com/OneUX
Version: 1.0.2

*/

const axios = require('axios') // npm i axios
const fs = require(`fs`)

class Translator { // main class

	constructor(){

	}

	/**
  	* @param {String} sl - EN
  	* @param {String} tl - PT-BR
  	* @param {String} text - Hello, World!
  	* @param {Boolean} raw - true
  */
	async translate(sl, tl, text, raw){

		this.url = `http://translate.googleapis.com/translate_a/single?client=gtx&sl=${sl}&tl=${tl}&dt=t&q=${text.trim().split(' ').join(" ")}&ie=UTF-8&oe=UTF-8`

		if (raw === true) {

			/*
				Returns raw translation, without using Promise
			*/

			return "This function is not ready yet!"

		} else {
			return new Promise((resolve, reject) => {
				axios.get(this.url).then((data) => {
					if (!data.status == 200) { return }
					resolve(data.data[0][0][0].toString())
				}).catch((err) => {
					reject(err)
				})
			})
		}

	}

	languages(){

		/*
			Return all languages accepteds by Google Translate
		*/

		return fs.readFileSync('data/languages.txt', 'utf8').toString()
	}

}

module.exports = Translator